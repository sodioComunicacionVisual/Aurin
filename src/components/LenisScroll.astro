---
// Componente isla para Lenis - Smooth Scrolling
// Siguiendo buenas prácticas de Astro Islands:
// - Solo carga JS cuando es necesario
// - Usa client:load para hidratar inmediatamente (necesario para scroll)
---

<div id="lenis-wrapper">
  <slot />
</div>

<script>
  import Lenis from 'lenis';
  import 'lenis/dist/lenis.css';

  // Inicializar Lenis con configuración optimizada
  const lenis = new Lenis({
    autoRaf: true, // RAF automático para mejor rendimiento
    smoothWheel: true,
    lerp: 0.1, // Suavidad del scroll (0-1)
    duration: 1.2, // Duración de la animación
    orientation: 'vertical',
    gestureOrientation: 'vertical',
    smoothTouch: false, // Mejor UX en móviles con scroll nativo
    wheelMultiplier: 1,
    touchMultiplier: 2,
    infinite: false,
  });

  // Exponer lenis globalmente para integraciones (GSAP, etc)
  if (typeof window !== 'undefined') {
    (window as any).lenis = lenis;
  }

  // Event listener opcional para debugging
  // lenis.on('scroll', (e: any) => {
  //   console.log('Scroll event:', e);
  // });

  // Cleanup al desmontar
  document.addEventListener('astro:before-swap', () => {
    lenis.destroy();
  });
</script>

<style>
  #lenis-wrapper {
    width: 100%;
    height: 100%;
  }
</style>
